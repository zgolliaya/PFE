pipeline {
    agent any
    
    stages {
        stage('Checkout') {
            steps {
                   git branch: 'B2B', url: 'https://github.com/zgolliaya/PFE.git'
            }
        }
        
        
        stage('Run Tests') {
            steps {
              
               sh "pip install robotframework-seleniumlibrary"
               sh "robot --output ${WORKSPACE}/robot-framework-results/output.xml --log ${WORKSPACE}/robot-framework-results/log.html --report ${WORKSPACE}/robot-framework-results/report.html --console verbose ${WORKSPACE}/robot-framework-tests"
               sh "robot ./test1/addopexcel.robot"
               step(
             [
            $class              : 'RobotPublisher',
             outputPath          : './robot-framework-results',
             outputFileName      : 'output.xml',
             disableArchiveOutput: true,
            logFileName         : 'log.html',
            reportFileName      : 'report.html',
             passThreshold       : 95,
             unstableThreshold   : 90,
             onlyCritical        : false
             ]
            )
                
            }
        }
    }
    
    
}

